<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>成绩列表</title>
    <style> /* 与其他list页面类似的样式 */ </style>
</head>
<body>
<h1>成绩信息管理</h1>

<div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
<div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

<div class="search-form">
    <form th:action="@{/scores}" method="get">
        学生姓名: <input type="text" name="studentName" th:value="${searchParams?.studentName}" />
        学号: <input type="text" name="studentNumber" th:value="${searchParams?.studentNumber}" />
        课程名称: <input type="text" name="courseName" th:value="${searchParams?.courseName}" />
        课程编号: <input type="text" name="courseNumber" th:value="${searchParams?.courseNumber}" />
        学期: <input type="text" name="semester" th:value="${searchParams?.semester}" />
        <button type="submit">查询</button>
        <a th:href="@{/scores}">清空查询</a>
    </form>
</div>

<p><a th:href="@{/scores/manage}">录入/修改成绩</a></p>

<table>
    <thead>
    <tr>
        <th>记录ID</th>
        <th>学号</th>
        <th>学生姓名</th>
        <th>课程编号</th>
        <th>课程名称</th>
        <th>成绩</th>
        <th>学期</th>
        <th>考试日期</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="score : ${scores}">
        <td th:text="${score.id}"></td>
        <td th:text="${score.student?.studentNumber}"></td>
        <td th:text="${score.student?.name}"></td>
        <td th:text="${score.course?.courseNumber}"></td>
        <td th:text="${score.course?.name}"></td>
        <td th:text="${score.grade}"></td>
        <td th:text="${score.semester}"></td>
        <td th:text="${score.examDate != null ? #temporals.format(score.examDate, 'yyyy-MM-dd') : ''}"></td>
        <td class="actions">
            <a th:href="@{/scores/manage(studentId=${score.studentId}, courseId=${score.courseId})}">编辑</a>
            <a th:href="@{/scores/delete(studentId=${score.studentId}, courseId=${score.courseId})}"
               onclick="return confirm('确定要删除这条成绩记录吗?');">删除</a>
        </td>
    </tr>
    <tr th:if="${scores == null or scores.isEmpty()}">
        <td colspan="9" style="text-align: center;">暂无成绩数据</td>
    </tr>
    </tbody>
</table>
</body>
</html>